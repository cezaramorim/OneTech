{% if perms.auth.view_group %}
{% load static %}

<main id="main-content" class="container-fluid py-4" data-page="lista_grupos">

  <!-- ğŸ”” Mensagens instantÃ¢neas -->
  <div id="mensagens" class="mb-3"></div>

  <div class="row justify-content-center">
    <div class="col-md-6">

      <!-- ğŸ·ï¸ TÃ­tulo -->
      <div class="text-center mb-4">
        <h2 class="titulo-formulario">Lista de Grupos</h2>
        <p class="text-muted dark:text-light">Gerencie os grupos e visualize permissÃµes atribuÃ­das.</p>
      </div>

      {% if grupos %}
      <!-- ğŸ“‹ FormulÃ¡rio com lista de grupos e aÃ§Ãµes -->
      <form id="grupos-form" method="POST" class="ajax-form">
        {% csrf_token %}

        <!-- ğŸ› ï¸ AÃ§Ãµes principais -->
        <div class="d-flex flex-wrap justify-content-between gap-2 mb-3">
          <div class="d-flex flex-wrap gap-2">
            <!-- âœï¸ Editar -->
            <button type="button" id="btn-editar" class="btn btn-outline-primary btn-sm" disabled>
              âœï¸ Editar
            </button>

            <!-- ğŸ—‘ï¸ Excluir -->
            <button type="submit"
                    formaction="{% url 'accounts:excluir_grupo_multiplo' %}"
                    class="btn btn-outline-danger btn-sm"
                    id="btn-excluir"
                    disabled>
              ğŸ—‘ï¸ Excluir
            </button>

            <!-- ğŸ” Ver PermissÃµes -->
            <button type="button" id="btn-ver-permissoes" class="btn btn-outline-info btn-sm" disabled>
              ğŸ” Ver PermissÃµes
            </button>
          </div>
        </div>

        <!-- ğŸ“¦ Lista de Grupos -->
        <ul class="list-group shadow-sm">
          {% for grupo in grupos %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div class="form-check">
              <input type="checkbox"
                     class="form-check-input grupo-checkbox"
                     name="grupos_selecionados"
                     value="{{ grupo.id }}"
                     id="grupo{{ grupo.id }}">
              <label class="form-check-label ms-2" for="grupo{{ grupo.id }}">
                <strong>{{ grupo.name }}</strong>
              </label>
            </div>
          </li>
          {% endfor %}
        </ul>
      </form>

      {% else %}
      <!-- â„¹ï¸ Nenhum grupo disponÃ­vel -->
      <div class="alert alert-info mt-3 text-center">
        Nenhum grupo cadastrado.
      </div>
      {% endif %}

      <!-- â• BotÃ£o Novo Grupo -->
      <div class="text-end mt-4">
        <a href="{% url 'accounts:cadastrar_grupo' %}" class="btn btn-success ajax-link">
          â• Novo Grupo
        </a>
      </div>

    </div>
  </div>
</main>

{% else %}
<!-- ğŸ”’ Sem permissÃ£o -->
<div class="alert alert-danger text-center mt-5">
  VocÃª nÃ£o tem permissÃ£o para acessar esta funcionalidade.
</div>
{% endif %}
